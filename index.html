<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ§Ú©Ø³ÛŒ Ø¨Ø§Ø¨Ø§ Ø¹Ø¨Ø§Ø³</title>
  <style>
    :root{--bg:#f7f9fb;--card:#fff;--text:#0b1a2b;--muted:#6c7a86;--green:#28a745;--danger:#c0392b}
    body { font-family: "Tahoma", "Arial", sans-serif; background:var(--bg); color:var(--text); display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .card { background:var(--card); padding:28px; border-radius:12px; box-shadow:0 6px 24px rgba(12,17,24,0.08); text-align:center; width:360px; }
    .icon { font-size:56px; }
    h1 { margin:10px 0 6px; font-size:22px; }
    p { margin:6px 0 18px; color:var(--muted); font-size:14px; }
    button { background:var(--green); color:white; border:0; padding:12px 18px; border-radius:8px; font-size:16px; cursor:pointer; display:inline-flex; align-items:center; gap:8px; }
    button.secondary { background:#f0f0f0; color:#222; }
    button:active { transform:translateY(1px); }
    .small { font-size:13px; color:#7a8a99; margin-top:12px; }
    .hint { color:var(--danger); margin-top:12px; font-size:13px; display:none; }
    /* modal */
    .overlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.4); z-index:40; }
    .modal{ background:white; padding:18px; border-radius:10px; width:320px; text-align:center; box-shadow:0 8px 30px rgba(2,6,23,0.3); }
    .modal h3{ margin:4px 0 10px; font-size:18px; }
    .modal p{ color:#556; font-size:14px; margin:6px 0 12px; }
    .row{ display:flex; gap:8px; justify-content:center; margin-top:8px; }
    .link-like{ background:none;border:0;color:#007bff;text-decoration:underline;cursor:pointer;padding:0;font-size:14px }
  </style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <div class="icon" aria-hidden="true">ğŸš•</div>
    <h1>ØªØ§Ú©Ø³ÛŒ Ø¨Ø§Ø¨Ø§ Ø¹Ø¨Ø§Ø³</h1>
    <p>Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† ØªØ§Ú©Ø³ÛŒØŒ Ø¯Ú©Ù…Ù‡Ù” Ø²ÛŒØ± Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯. Ø§Ø¨ØªØ¯Ø§ Ø§Ø² Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø³Ø¤Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>

    <button id="bookBtn">Ú¯Ø±ÙØªÙ† ØªØ§Ú©Ø³ÛŒ âœ…</button>

    <div id="status" class="small"></div>
    <div id="error" class="hint" role="alert"></div>
  </div>

  <!-- ÛŒÚ© Ù…ÙˆØ¯Ø§Ù„ Ø³Ø§Ø¯Ù‡ Ú©Ù‡ Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬ÙˆØ² Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <h3>Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ù‡ ØªØ§Ú©Ø³ÛŒ Ø¨Ø§Ø¨Ø§ Ø¹Ø¨Ø§Ø³</h3>
      <p>Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø² Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡Ù” Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ø¯. Ø§Ú¯Ø± Ù‚Ø¨ÙˆÙ„ Ú©Ù†ÛŒØ¯ØŒ Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ØªØ§Ú©Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
      <div class="row">
        <button id="confirmBtn">Ø§ÛŒÙ†â€ŒØ¨Ø§Ø± Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ù‡ÛŒØ¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯</button>
        <button id="denyBtn" class="secondary">ÙØ¹Ù„Ø§Ù‹ Ù†Ù‡</button>
      </div>
      <div class="row" style="margin-top:10px">
        <button id="explainBtn" class="link-like">Ú†Ø±Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ</button>
      </div>
    </div>
  </div>

  <script>
    /*****************************************************************************
     * Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ:
     * - Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† ØªÙˆÚ©Ù† Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø¯Ø± Ú©Ø¯ Ø³Ù…Øª Ú©Ø§Ø±Ø¨Ø± (Ú©Ù„Ø§ÛŒÙ†Øª) Ø¨Ø³ÛŒØ§Ø± Ù†Ø§Ø§Ù…Ù† Ø§Ø³Øª.
     *   Ù‡Ø± Ú©Ø³ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ØªÙˆÚ©Ù† Ø±Ø§ Ø¨Ø¨ÛŒÙ†Ø¯ Ùˆ Ø§Ø² Ø¨Ø§Øª Ø³ÙˆØ¡Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø¯.
     * - Ù†Ø³Ø®Ù‡Ù” Ø§Ù…Ù†â€ŒØªØ±: ÛŒÚ© Ø³Ø±ÙˆØ± Ú©ÙˆÚ†Ú© Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ Node/Express) Ú©Ù‡ ØªÙˆÚ©Ù†
     *   Ø±Ø§ ÙÙ‚Ø· Ø¯Ø± Ø³Ù…Øª Ø³Ø±ÙˆØ± Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±Ø¯Ø› Ú©Ù„Ø§ÛŒÙ†Øª ÙÙ‚Ø· Ù…Ø®ØªØµØ§Øª Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯ Ùˆ
     *   Ø³Ø±ÙˆØ± Ù¾ÛŒØºØ§Ù… Ø±Ø§ Ø¨Ù‡ Telegram API Ø¨ÙØ±Ø³ØªØ¯.
     *
     * Ø¯Ø± Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø³Ø±ÛŒØ¹ØŒ Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ³Øª Ú©Ù†ÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ØªÙˆÚ©Ù† Ùˆ
     * chat_id Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯Ø› Ø§Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ù…Ù‡Ù… Ø§Ø³Øª Ú©Ù‡ Ø³Ø§ÛŒØª Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§ÛŒÙ…Ù†
     * Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯. Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡Ù” Ø³Ø±ÙˆØ± Ù†ÛŒØ² Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
     *****************************************************************************/

    // Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§Ø±Ø³Ø§Ù„ÛŒ Ø§Ø² Ø´Ù…Ø§ (ØªÙˆØ¬Ù‡: Ù†Ø§Ø§Ù…Ù† Ø¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª)
    const BOT_TOKEN = '8295388715:AAGkM7QaqplE1WNpM6S_GI6aBLzBObK2he8';
    const CHAT_ID   = '8293145520';

    const overlay = document.getElementById('overlay');
    const bookBtn = document.getElementById('bookBtn');
    const confirmBtn = document.getElementById('confirmBtn');
    const denyBtn = document.getElementById('denyBtn');
    const explainBtn = document.getElementById('explainBtn');
    const statusDiv = document.getElementById('status');
    const errorDiv = document.getElementById('error');

    function showOverlay() {
      overlay.style.display = 'flex';
      overlay.setAttribute('aria-hidden','false');
    }
    function hideOverlay() {
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
    }
    function setStatus(text) { statusDiv.textContent = text; errorDiv.style.display='none'; }
    function setError(text) { errorDiv.style.display='block'; errorDiv.textContent = text; statusDiv.textContent=''; }

    // ØªØ§Ø¨Ø¹ÛŒ Ú©Ù‡ Ù¾Ø³ Ø§Ø² Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
    async function handlePosition(lat, lon) {
      setStatus('Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯. Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…...');
      try {
        // Ø§Ø±Ø³Ø§Ù„ Ù„ÙˆÚ©ÛŒØ´Ù† Ø¨Ø§ sendLocation Ùˆ Ø³Ù¾Ø³ Ù¾ÛŒØ§Ù… Ù…ØªÙ†ÛŒ
        const sendLocUrl = `https://api.telegram.org/bot${encodeURIComponent(BOT_TOKEN)}/sendLocation`;
        const locParams = new URLSearchParams({ chat_id: CHAT_ID, latitude: String(lat), longitude: String(lon) });

        const r1 = await fetch(sendLocUrl, { method: 'POST', body: locParams });
        const j1 = await r1.json();
        if (!j1.ok) throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù„ÙˆÚ©ÛŒØ´Ù†: ' + (j1.description || r1.statusText));

        const messageText = `Ù…Ø´ØªØ±ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ§Ú©Ø³ÛŒ Ø¯Ø§Ø¯Ù‡.\nÙ…ÙˆÙ‚Ø¹ÛŒØª: https://www.openstreetmap.org/?mlat=${lat}&mlon=${lon}\nØªÙˆØ¶ÛŒØ­: ØªØ§Ú©Ø³ÛŒ ØªØ§ Ø¯Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡Ù” Ø¯ÛŒÚ¯Ø± Ù¾ÛŒØ´ Ø´Ù…Ø§Ø³Øª!`;
        const sendMsgUrl = `https://api.telegram.org/bot${encodeURIComponent(BOT_TOKEN)}/sendMessage`;
        const msgParams = new URLSearchParams({ chat_id: CHAT_ID, text: messageText });

        const r2 = await fetch(sendMsgUrl, { method: 'POST', body: msgParams });
        const j2 = await r2.json();
        if (!j2.ok) throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…: ' + (j2.description || r2.statusText));

        setStatus('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. ØªØ§Ú©Ø³ÛŒ ØªØ§ Ø¯Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯ÛŒÚ¯Ø± Ù¾ÛŒØ´ Ø´Ù…Ø§Ø³Øª!');
      } catch (err) {
        setError('Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯: ' + (err.message || err));
      }
    }

    // ØªØ§Ø¨Ø¹ÛŒ Ú©Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù„ÙˆÚ©ÛŒØ´Ù† Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
    function requestGeolocation() {
      if (!navigator.geolocation) {
        setError('Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Geolocation Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.');
        return;
      }

      setStatus('Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÙˆÙ‚Ø¹ÛŒØª Ø§Ø² Ù…Ø±ÙˆØ±Ú¯Ø±...');
      navigator.geolocation.getCurrentPosition(function(pos) {
        hideOverlay();
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        handlePosition(lat, lon);
      }, function(err) {
        hideOverlay();
        if (err.code === err.PERMISSION_DENIED) {
          // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø¨Ù„Ø§Ú© Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¯ÛŒÚ¯Ø± Ù¾Ù†Ø¬Ø±Ù‡Ù” Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø§ Ù†Ø´Ø§Ù† Ù†Ø¯Ù‡Ø¯.
          // Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ú¯ÙˆÛŒÛŒØ¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø±ÙˆØ±Ú¯Ø±/Ø³Ø§ÛŒØª Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†Ø¯.
          setError('Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø±Ø¯ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ø¬ÙˆØ² Ø±Ø§ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø±ÙˆØ±Ú¯Ø± ÛŒØ§ Ù†ÙˆØ§Ø± Ù‚ÙÙ„ Ø¨Ø§Ù„Ø§ÛŒ Ø¢Ø¯Ø±Ø³ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.');
        } else {
          setError('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª: ' + (err.message || err.code));
        }
      }, {
        enableHighAccuracy: true,
        timeout: 20000,
        maximumAge: 0
      });
    }

    // ÙˆÙ‚ØªÛŒ Ø¯Ú©Ù…Ù‡Ù” Ø§ØµÙ„ÛŒ Ø²Ø¯Ù‡ Ø´Ø¯ØŒ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø§Ø®Ù„ÛŒ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ… ØªØ§ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø¯Ø§Ù†Ø¯
    bookBtn.addEventListener('click', () => {
      // Ø§Ú¯Ø± ØªÙˆÚ©Ù†/Ú†Øªâ€ŒØ¢ÛŒâ€ŒØ¯ÛŒ Ù‡Ù†ÙˆØ² Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù†Ø´Ø¯Ù‡ØŒ Ø®Ø·Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…
      if (!BOT_TOKEN || BOT_TOKEN.includes('REPLACE_WITH') || !CHAT_ID || CHAT_ID.includes('REPLACE_WITH')) {
        setError('Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø±Ø¨Ø§Øª ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ ÛŒØ§ Ù†Ø§Ø§Ù…Ù† Ù‡Ø³ØªÙ†Ø¯. Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ ØµØ­ÛŒØ­ Ø¨Ø§ÛŒØ¯ BOT_TOKEN Ùˆ CHAT_ID ØªÙ†Ø¸ÛŒÙ… Ø´ÙˆÙ†Ø¯.');
        return;
      }
      showOverlay();
    });

    // Ú©Ø§Ø±Ø¨Ø± ØªØ§ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ -> Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬ÙˆØ² Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†
    confirmBtn.addEventListener('click', () => {
      requestGeolocation();
    });

    // Ú©Ø§Ø±Ø¨Ø± Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ -> Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø³ØªÙ‡ Ø´ÙˆØ¯
    denyBtn.addEventListener('click', () => {
      hideOverlay();
      setStatus('Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù„ØºÙˆ Ø´Ø¯.');
    });

    explainBtn.addEventListener('click', () => {
      alert('Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ú©Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø§Ø² Ø®ÙˆØ¯ Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø³Øª Ùˆ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ "Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù†" ÛŒØ§ "Ø±Ø¯" Ø±Ø§ Ø¯Ø§Ø±Ø¯. Ø§Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ø¯ÙØ¹Ø§Øª Ø¨Ø¹Ø¯ÛŒ Ú¯Ø²ÛŒÙ†Ù‡Ù” "Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ø¯Ù‡" ÛŒØ§ Ù…Ø´Ø§Ø¨Ù‡ Ø¢Ù† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ØŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¯ÛŒÚ¯Ø± Ø³Ø¤Ø§Ù„ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø³ØªØ±Ø³ÛŒ Ø±Ø§ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ Ø¨Ø§ÛŒØ¯ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§ÛŒØª/Ù…Ø±ÙˆØ±Ú¯Ø± Ø¢Ù† Ø±Ø§ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒØ¯.');
    });

    // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø³ØªØ±Ø³ÛŒ Ø±Ø§ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª permission API Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
    (async function checkPermissionStatus() {
      if (!navigator.permissions) return;
      try {
        const p = await navigator.permissions.query({ name: 'geolocation' });
        if (p.state === 'denied') {
          setStatus('Ø¯Ø³ØªØ±Ø³ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù…Ø³Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§ÛŒØª Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.');
        }
        // listen to changes
        p.onchange = () => {
          if (p.state === 'granted') setStatus('');
          if (p.state === 'denied') setStatus('Ø¯Ø³ØªØ±Ø³ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù…Ø³Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§ÛŒØª Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.');
        };
      } catch (e) {
        // Ø¨Ø±Ø®ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø®Ø·Ø§ Ø¨Ø¯Ù‡Ù†Ø¯Ø› Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ø¨Ú¯ÛŒØ±ÛŒØ¯
      }
    })();
  </script>

  <noscript>
    <div style="text-align:center; margin-top:14px; color:#c00">Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø®Ø§Ù…ÙˆØ´ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ú©Ù…Ù‡ Ø¨Ø§ÛŒØ¯ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯.</div>
  </noscript>
</body>
  </html>
